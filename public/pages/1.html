
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/2.css">
</head>
<body>
    <div class="container"> 
        <div class="box_1">
          <div class="nav">
              <div class="nav_content">
                  <ul>
                      <li><a href="#">Home</a></li>
                      <li><a href="#">Products & Ordering</a></li>
                      <li><a href="#">Payements</a></li>
                      <li>one</li>
                  </ul>
              </div>
              <div class="profile">
                  <img src="bg.jpg" alt="Profile Picture">
                  <div>
                      <p>IRADUKUNDA Bonheur</p>
                      <p>bonheurjoseph411@gmail.com</p>
                  </div>
              </div>
              <div class="logo">
                  <h1>
                    MySor
                  </h1>
              </div>
          </div>
         <div class="main-content">
            <table id = "available_products_table">
                <tr><td colspan="4" class="title">Avairable products</td></tr>
                <tr><td>Product Image</td><td>Product Details</td><td>Amout/Item</td><td>Add to cart</td></tr>
                <tr><td>-</td><td>TV </td><td>100</td><td><button class="plus" id = "1">+</button></td></tr><tr><td>-</td><td>panel </td><td>200</td><td><button class="plus" id = "2">+</button></td></tr>                
    

            </table>
            <div class="cart">
               <div id = "table_3_container">
                    <table id = "selected_products_table">
                        <tr>
                            <td colspan="4" class="title">Cart</td>
                        </tr>
                        <tr><td>Pr.name</td><td>items</td><td>Amount</td><td>Actions</td></tr>
                    </table>
               </div>
            </div>
         </div>
        </div>
    </div>

    <script src="2.js"></script>
    <script>




// no loop section ----------------------------------------------------------
    let table_2 = document.getElementById("selected_products_table");
    let targetDiv = document.getElementById("table_3_container");
    let total = 0;
    let listInitiated = false;
    // --------------------------
        let selectedProducts = {
            // no loop here
        }

        let availableProducts = {
            "TV":100,"panel":200}            
     

        
        let row_count = 0; //no loop
        
        
                    let item_1=1;
                    let amount_1 = 0;
                    
                    let item_2=1;
                    let amount_2 = 0;
                            

//-----------------------------------------------------------

                    let productId_1 = document.getElementById("1");
                    
                    let productId_2 = document.getElementById("2");
                        //--------------------------------------------------------
    
                    let product_active1 = true
                    let product_active2 = true//-------------------------------------------------------------



                        productId_1.onclick = ()=>{
                            if(product_active1){
                                selectedProducts['TV'] = availableProducts['TV'];
                                amount_1 += selectedProducts['TV'];
                                product_active1 = false;
                                checkList();
                            }
                    }
                        
                        
                        productId_2.onclick = ()=>{
                            if(product_active2){
                                selectedProducts['panel'] = availableProducts['200'];
                                amount_2 += selectedProducts['panel'];
                                product_active2 = false;
                                checkList();
                            }
                    }
                        
                        

//------------------------------------------------------------------

function checkList(){
    if(!listInitiated){
        listInitiated = true;
        
}else{
    flushTable(); // this is responsible for cleaning all things in table for new data to reload
}


for (const key in selectedProducts) {
            if (selectedProducts.hasOwnProperty.call(selectedProducts, key)) {
                const value = selectedProducts[key];

                row_1= document.createElement('tr');
col_1_1= document.createElement('td');
col_2_1= document.createElement('td');
col_3_1= document.createElement('td');
col_4_1= document.createElement('td');
col_4_1.setAttribute('class','act_btns');
btn_1_1= document.createElement('button');
btn_1_1.setAttribute('id','button_add'+row_count);
btn_2_1= document.createElement('button');
btn_2_1.setAttribute('id','button_rem'+row_count);
col_2_1.setAttribute('id','item_'+row_count);
col_2_1.setAttribute('id','item_'+row_count);
btn_3_1= document.createElement('button');// deleting button
btn_3_1.setAttribute('id','button_del'+row_count);
col_1_1.innerHTML = key;
col_2_1.innerHTML = value;
col_3_1.innerHTML = item_1;
btn_1_1.innerHTML = '+';
btn_2_1.innerHTML = '-';
btn_3_1.innerHTML = 'x';
col_4_1.append(btn_1_1);
col_4_1.append(btn_2_1);
col_4_1.append(btn_3_1);
row_1.append(col_1_1);
row_1.append(col_3_1);
row_1.append(col_2_1);
row_1.append(col_4_1);
table_2.append(row_1);
total += value;





btn_1_1.onclick = function(){
    item_1++;
    col_3_1.innerHTML = item_1;
    amount_1 = value * item_1;
    col_2_1.innerHTML = amount_1;
    total= amount_1;
    total_span.innerHTML = total;
}
btn_2_1.onclick = function(){
    if(item_1 >= 1){
        item_1--;
        col_3_1.innerHTML = item_1;
    amount_1 = value * item_1;
    col_2_1.innerHTML = amount_1;
    total= amount_1;
    total_span.innerHTML = total;
    }
    
}

btn_3_1.onclick = function(){
    product_active1 = true;
    total -= amount_1;
    amount_1 = 0;
    console.log(amount_1);
    table_2.removeChild(row_1);
    if(row_count == 0){
        item_1 = 1;
        table_2.removeChild(row_2);
    }
    
    total_span.innerHTML = total;
    
    
        listInitiated = false;
        delete selectedProducts[key];
    
}















}

       


total_span = document.createElement('span');
total_span.setAttribute('id','o_total');
row_2 = document.createElement('tr');
col_1= document.createElement('td');
col_1.setAttribute('colspan','4');
col_1.setAttribute('class','title');
col_1.innerHTML = 'Total: ';
total_span.innerHTML = total;
col_1.append(total_span);
col_1.append(' Frw');
row_2.append(col_1);
table_2.append(row_2);row_2= document.createElement('tr');
col_1_2= document.createElement('td');
col_2_2= document.createElement('td');
col_3_2= document.createElement('td');
col_4_2= document.createElement('td');
col_4_2.setAttribute('class','act_btns');
btn_1_2= document.createElement('button');
btn_1_2.setAttribute('id','button_add'+row_count);
btn_2_2= document.createElement('button');
btn_2_2.setAttribute('id','button_rem'+row_count);
col_2_2.setAttribute('id','item_'+row_count);
col_2_2.setAttribute('id','item_'+row_count);
btn_3_2= document.createElement('button');// deleting button
btn_3_2.setAttribute('id','button_del'+row_count);
col_1_2.innerHTML = key;
col_2_2.innerHTML = value;
col_3_2.innerHTML = item_2;
btn_1_2.innerHTML = '+';
btn_2_2.innerHTML = '-';
btn_3_2.innerHTML = 'x';
col_4_2.append(btn_1_2);
col_4_2.append(btn_2_2);
col_4_2.append(btn_3_2);
row_2.append(col_1_2);
row_2.append(col_3_2);
row_2.append(col_2_2);
row_2.append(col_4_2);
table_2.append(row_2);
total += value;





btn_1_2.onclick = function(){
    item_2++;
    col_3_2.innerHTML = item_2;
    amount_2 = value * item_2;
    col_2_2.innerHTML = amount_2;
    total= amount_2;
    total_span.innerHTML = total;
}
btn_2_2.onclick = function(){
    if(item_2 >= 1){
        item_2--;
        col_3_2.innerHTML = item_2;
    amount_2 = value * item_2;
    col_2_2.innerHTML = amount_2;
    total= amount_2;
    total_span.innerHTML = total;
    }
    
}

btn_3_2.onclick = function(){
    product_active2 = true;
    total -= amount_2;
    amount_2 = 0;
    console.log(amount_2);
    table_2.removeChild(row_2);
    if(row_count == 0){
        item_2 = 1;
        table_2.removeChild(row_2);
    }
    
    total_span.innerHTML = total;
    
    
        listInitiated = false;
        delete selectedProducts[key];
    
}





}

       


total_span = document.createElement('span');
total_span.setAttribute('id','o_total');
row_2 = document.createElement('tr');
col_2= document.createElement('td');
col_2.setAttribute('colspan','4');
col_2.setAttribute('class','title');
col_2.innerHTML = 'Total: ';
total_span.innerHTML = total;
col_2.append(total_span);
col_2.append(' Frw');
row_2.append(col_2);
table_2.append(row_2);       


        
       
 
}
function flushTable(){
    //----------------------------

        table_2.removeChild(row_1);
    table_2.removeChild(row_2);
    //-----------------------------------    
    table_2.removeChild(row_1);
    table_2.removeChild(row_2);
    //-----------------------------------
}


    </script>
</body>
</html>